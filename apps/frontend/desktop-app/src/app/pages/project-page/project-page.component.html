<ng-container *ngIf="state$ | async as state">
  <!-- FIXME: 「ボードを削除しました」などのNotificationがヘッダーの背後に隠れてしまう -->
  <div #header class="sticky z-40 top-0">
    <router-outlet name="header"></router-outlet>
  </div>

  <div class="flex items-start mb-3">
    <aside #sideNav style="width: 240px" class="sticky flex-shrink-0 p-3">
      <ng-container *ngFor="let project of (state$ | async).projects">
        <ui-project-navigation
          [project]="project"
          [boards]="project.boards"
          (clickedCreateBoard)="(null)"
          (clickedDeleteProject)="
            onClickedDeleteProjectButton$.next({
              project: project
            })
          "
          (clickedEditBoard)="(null)"
          (clickedDeleteBoard)="
            onClickedDeleteBoardButton$.next({
              project: project,
              board: $event
            })
          "
        ></ui-project-navigation>
      </ng-container>
    </aside>
    <div class="w-full mt-1"><router-outlet></router-outlet></div>
  </div>

  <bis-project-delete-dialog
    [project]="state.projectDeleteDialog.project"
    [isOpen$]="isOpenProjectDeleteDialog$"
    (closed)="onClosedProjectDeleteDialog$.next()"
  ></bis-project-delete-dialog>

  <bis-board-delete-dialog
    [project]="state.boardDeleteDialog.project"
    [board]="state.boardDeleteDialog.board"
    [isOpen$]="isOpenBoardDeleteDialog$"
    (closed)="onClosedBoardDeleteDialog$.next()"
  ></bis-board-delete-dialog>
</ng-container>
